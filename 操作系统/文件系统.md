几个索引表就是几级索引

# 外存

所有的计算机应用程序都要存储信息和检索信息对存储有三个基本要求：

- 能够存储大量的信息
- 长期保存信息
- 可以共享信息

## 磁带

- 永久保存大容量数据
- 顺序存取设备：前面的物理块被存取访问之后，才能存取后续的物理块的内容，存取速度较慢，主要用于后备存储，或存储不经常用的信息。

## 光盘

- 光盘容量大，速度快，价格便宜，但一般不可写- 可读写光盘驱动器价格贵，写过程很麻烦
- 光盘的空间结构与磁盘类似

## 磁盘

直接（随机）存取设备，取磁盘上任一物理块的时间不依赖于该物理块所处的位置

## 外存的特点

- 容量大，断电后仍可保存信息，速度较慢，成本较低
- 两部分组成：驱动部分+存储介质
- 种类很多
- 外存空间组织与地址与存取方式非常复杂
- I/O 过程方式非常复杂

## 外存的管理

磁盘为非易失性存储介质，且存储空间大，可以支持大量信息的长期存储。可以把磁盘当作一种大小固定的块的线性序列，并支持如下两种操作：

- 读块
- 写块

存在的问题：

- 如何找到信息？
- 如何防止一个用户读取另一个用户的数据？
- 如何知道哪些块是空闲的？

解决方法：对外存进行抽象——文件。把信息以一种单元，即文件的形式存储在磁盘或其他外部介质上。文件是通过操作系统来管理的，包括：文件的结构，命名，存取，使用，保护和实现方法。操作系统处理文件的部分成为文件系统。

# 文件

## 数据项

- 基本数据项。这是用于描述一个对象的某种属性的字符集，是数据组织中可以命名的最小逻辑数据单位， 即原子数据，又称为数据元素或字段。它的命名往往与其属性一致。例如，用于描述一个学生的基本数据项有： 学号、 姓名、 年龄、 所在班级等。
- 组合数据项。它是由若干个基本数据项组成的，简称组项。例如，经理便是个组项，它由正经理和副经理两个基本项组成。又如，工资也是个组项，它可由基本工资、工龄工资和奖励工资等基本项所组成。

## 记录

记录是一组相关数据项的集合，用于描述一个对象在某方面的属性。一个记录应包含哪些数据项，取决于需要描述对象的哪个方面。而一个对象，由于他所处的环境不同可把他作为不同的对象。

## 文件的定义

文件是数据的一种组织形式，由数据项或记录构成。
构成文件的基本单位可以是信息项（单个字符或字节），也可以是记录。据此，文件可以有两种定义：

- 文件是具有符号名的信息（数据）项的集合。
- 文件是具有符号名的记录的集合。

## 文件分类

文件分类原因

- 文件的分类是为了更好地管理和使用，要科学地分门别类，对不同的文件进行不同的管理。这样，不仅提高了文件的存取速度，对文件的共享和保护也有利
- 一般系统级与用户级要进行不同的管理。例如，一个系统文件工作时要读入内存，放在内存的某一固定区，有较高的保护级别，一般用户不允许进入。而一般用户的用户文件是在另外管辖的可用区有空闲时才能被调入指定的内存用户区。

分类  
按文件性质与用途分类

- 系统文件
- 程序库文件
- 用户文件

按保护级别分类

- 可执行文件
- 只读文件
- 读写文件

按文件流向分类

- 输入文件
- 输出文件
- 输入/输出文件

### UNIX 文件分类

UNIX 将文件分为普通文件、目录文件、特殊文件（设备文件）三类

- 普通文件:包含的是用户的信息，一般为 ASCII 或二进制文件
- 目录文件:管理文件系统的系统文件
- 特殊文件:
  - 字符设备文件：和输入输出有关，用于模仿串行 I/O 设备，例如终端，打印机，网络等
  - 块设备文件：模仿磁盘（譬如/dev/null）

分类的目的：对不同文件进行管理，提高系统效率；提高用户界面友好性

## 文件命名

许多操作系统支持文件名用圆点隔开为两部分，圆点后面的部分称为文件扩展名。文件扩展名通常表示文件的一些信息。（某类程序的专用数据格式等）

## 文件属性

文件属性也被称为元数据，如文件创建的日期、时间、文件大小等。

## 文件操作

使用文件的目的是存储信息并方便以后的检索，系统一般提供如下系统调用。

- create
- delete
- open
- close
- read
- write
- append
- get attributes
- set attributes
- rename

# 文件系统

## 概念

- 系统角度：是对文件存储器的存储空间进行组织、分配、负责文件的存储并对存入的文件实施保护、检索的一组软件的集合。
- 用户角度：实现“按名存取”

## 功能

- 有效分配文件存储器的存储空间。
- 提供一种组织数据的方法。（物理结构+逻辑结构）
- 提供合适的存储方法，以适应各种不同的应用。（譬如，提供顺序存取和直接存取方法）
- 提供一组服务，使用户能处理数据以执行所需要的操作。（包括创建文件，撤销文件、读文件、写文件、传输文件和控制文件的访问权限等）

# 文件组织

## 两种观点

- 用户观点（逻辑结构）：研究的是用户思维中的抽象文件，也叫逻辑文件。其目的是为用户提供一种结构清晰、使用简便的逻辑组织。用户按此去存储、检索和加工处理有关文件信息。
- 实现观点（物理结构）：研究的是存储在物理设备介质上的实际文件，即物理文件。其目的是选择一些性能良好、设备利用率高的物理结构。系统按此和外部设备打交道，控制信息的传输。

## 逻辑结构

- 记录式文件
  有结构文件，在逻辑上被看成是一组连续顺序的记录的集合。
  - 如果记录的长度都相同，则称为定长记录文件
  - 如果记录的长度不等，则称为变长记录文件
- 流式文件
  无结构的文件，是相关的有序字符的集合。文件长度即为所含字符数。不分成记录，而是直接由一串信息组成。流式文件是相关信息的有序集合，或者说是有一定意义的字符流。
  对大量的源程序、可执行文件、库函数等，所采用的就是无结构的文件形式，即流式文件。其长度以字节为单位。对流式文件的访问，则是采用读写指针来指出下一个要访问的字符。可以把流式文件看作是记录式文件的一个特例（即每个记录只含一个字符）。
  在 UNIX 系统中，所有的文件都被看作是流式文件；即使是有结构文件，也被视为流式文件；系统不对文件进行格式处理。
  好处：提供很大的灵活性
