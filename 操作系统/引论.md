第 2 章占比 50%

# 什么是操作系统

计算机系统的组成：

- 硬件系统：CPU、存储器、I/O、I/O 控制系统；
- 软件系统：
  - 系统软件：管理计算机本身的操作。如操作系统、编译软件……
  - 应用软件：提供给用户进行解决问题。如科学计算、事务管理

操作系统是位于硬件抽象层（HAL)之上，所有其他软件层之下的一个系统软件，是管理计算机系统中各种软硬件资源，方便用户使用计算机系统的程序集合。

# 操作系统的作用

- 扩展机器：为用户（应用程序）提供良好服务（界面）
- 资源管理：管理软件硬件资源，在相互竞争的程序之间有序地对处理器、内存以及其他 I/O 设备的分配。处理器 CPU、内存、I/O 设备、文件。

# 操作系统的产生与发展

- 第一代：真空管和穿孔卡片。
  - 特点：用户独占全机、CPU 等待人工操作。
  - 缺点：人机矛盾、效率低。
- 第二代：晶体管和批处理系统。
  - 联机批处理
    - 优点：与手工相比，计算机使用效率提高了
    - 缺点：处理机和 I/O 设备之间的速度矛盾
  - 脱机批处理
    - 优点：解决处理机高速与 I/O 设备低速之间的矛盾
    - 缺点：磁带需要人工拆卸、操作员需要监督机器状态
- 第三代：集成电路和多道程序设计
  - 优点：资源利用率高、系统吞吐量大。适合大型科学计算、数据处理
  - 缺点：平均周转时间长、无交互能力
- 第四代：个人计算机
- 第五代：移动计算机

# 操作系统的特性

- 并发：能处理多个同时性活动的能力
- 共享：多个计算任务对资源的共同享用。向各个用户分别提供充足的资源是十分浪费的。多个用户共享一个程序的同一副本，而不是分别向每个用户提供一个副本，这样可以避免重复开发，节省人力资源。
- 不确定性：处理随机发生的多个时间。操作系统必须能处理任何一种事件序列，以使各个用户的各种计算任务正确地完成。

# 计算机硬件简介

## 处理器

计算机的“大脑”是 CPU，提供计算机最基本功能，即执行指令。指令的执行分三个阶段：

- 首先从内存中取出指令
- 解码以确定其类型和操作数
- 执行
- 取值、解码并执行下一条指令

CPU 周期：完成一条指令的执行（指令的读入、解码和执行）所需要的时间。

多线程：允许 CPU 保持两个不同的线程状态，然后纳秒级的时间尺度来回切换。

多核芯片：包含多个完整处理器的 CPU 芯片
L1 缓存最快。

## 存储器

计算机中存储程序和数据的部件。存储器可分为内存和外村以及用于数据和程序暂时存储的寄存器与高速缓存等。主要设计目标：访问时间短、容量大、价格便宜。

## 磁盘

非易失存储设备

- 磁盘 HDD
- 固体硬盘 SSD

## I/O 设备

计算机系统中除 CPU、主存储器之外的所有其他设备。磁盘也是 I/O 设备。

主要包括：存储设备、键盘、显示器、网卡、调制解调器等。

输入设备：计算机用来“感知”或“接触”外部世界的设备，将从外部世界来的信息输入计算机。

输出设备：计算机用来“影响”或“控制”外部世界的设备，将计算机加工好的信息输出给外部世界。
根据 I/O 设备工作方式的不同，通常进行如下分类：

- 字符设备，又叫人机交互设备。用户通过这些设备实现与计算机系统的通信。它们大多是以字符为单位发送和接受数据的，数据通信的速度比较慢。例如，键盘和显示器为一体的字符终端、打印机、扫描仪、包括鼠标等，
- 块设备 block device，又叫外部存储器，用户通过这些设备实现程序和数据的长期保存。与字符设备相比，它们是以块为单位进行传输的，如磁盘、磁带和光盘等。
- 网络通信设备。这类设备主要有网卡、调制解调器等，主要用于与远程设备的通信。这类设备的传输速度比字符设备高，但比外部存储器低。

I/O 设备一般包括：设备控制器和设备本身。控制器和其中的缓冲主要用来控制和暂时存储外部设备与计算机之间交换的数据和程序。

程序一般存储在外存里。

## I/O

实现 I/O 的三种方式：

- 忙等待
- 中断
- 直接存储器访问 DMA
